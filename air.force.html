<!doctype html>
<html class="no-js" lang="en-gb" itemscope itemtype="http://schema.org/WebPage">
<head>
<meta charset="utf-8">
<!-- Cookiebot -->
<script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="a846e6f5-43a5-4ef9-8441-7e3c29062481" data-blockingmode="auto" type="text/javascript"></script>
<!-- End Cookiebot -->
<!-- Google consent mode -->
<script data-cookieconsent="ignore">
window.dataLayer = window.dataLayer || [];
function gtag() {
dataLayer.push(arguments);
}
gtag("consent", "default", {
ad_storage: "denied",
analytics_storage: "denied",
wait_for_update: 500
});
gtag("set", "ads_data_redaction", true);
</script>
<!-- End Google consent mode -->
<!-- Google Tag Manager -->
<script data-cookieconsent="ignore">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P6NFT76');</script>
<!-- End Google Tag Manager -->
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Information&#x20;about&#x20;the&#x20;Red&#x20;Arrows&#x20;Displays,&#x20;the&#x20;sequence,&#x20;types,&#x20;events&#x20;and&#x20;requesting&#x20;a&#x20;flypast.">
<meta name="keywords" content="">
<meta name="format-detection" content="telephone=no">
<!-- prefetch/preconnect items -->
<link rel="dns-prefetch" href="https://use.typekit.net">
<link rel="dns-prefetch" href="https://p.typekit.net">
<link rel="dns-prefetch" href="https://www.googletagmanager.com">
<link rel="prefetch" href="https://use.typekit.net/nsb4ump.js">
<link rel="prefetch" href="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/assets/dist/images/clouds_background-0ca8cc4e56.jpg">
<link rel="prefetch" href="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/assets/dist/images/one_pixel_dark_gradient-addcb6f80f.png">
<link rel="prefetch" href="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/assets/dist/images/raf-logo-reversed-fff47656e9.png">
<link rel="dns-prefetch" href="https://s.ytimg.com">
<link rel="dns-prefetch" href="https://www.youtube.com">
<!-- FAV AND TOUCH ICONS -->
<link rel="apple-touch-icon" href="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/favicons/apple-touch-icon.png?v=2" crossorigin="use-credentials">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/favicons/favicon-32x32.png?v=2" crossorigin="use-credentials">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/favicons/favicon-16x16.png?v=2" crossorigin="use-credentials">
<link rel="manifest" href="img/site.webmanifest?v=2" crossorigin="use-credentials">
<link rel="mask-icon" href="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/favicons/safari-pinned-tab.svg?v=2" color="#5bbad5" crossorigin="use-credentials">
<link rel="shortcut icon" href="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/favicons/favicon.ico?v=2" crossorigin="use-credentials">
<meta name="msapplication-config" content="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/favicons/browserconfig.xml?v=2">
<meta name="theme-color" content="#ffffff">
<!--[if lt IE 9]>
<script>
// Console-polyfill. MIT license.
// https://github.com/paulmillr/console-polyfill
// Make it safe to do console.log() always.
(function(global) {
'use strict';
global.console = global.console || {};
var con = global.console;
var prop, method;
var empty = {};
var dummy = function() {};
var properties = 'memory'.split(',');
var methods = ('assert,clear,count,debug,dir,dirxml,error,exception,group,' +
'groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,' +
'show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn').split(',');
while (prop = properties.pop()) if (!con[prop]) con[prop] = empty;
while (method = methods.pop()) if (!con[method]) con[method] = dummy;
})(typeof window === 'undefined' ? this : window);
// Using `this` for web workers while maintaining compatibility with browser
// targeted script loaders such as Browserify or Webpack where the only way to
// get to the global object is via `window`.
!window.addEventListener&&function(e,t,n,r,i,s,o){e[r]=t[r]=n[r]=function(e,t){var n=this;o.unshift([n,e,t,function(e){e.currentTarget=n,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||n,t.call(n,e)}]),this.attachEvent("on"+e,o[0][3])},e[i]=t[i]=n[i]=function(e,t){for(var n=0,r;r=o[n];++n)if(r[0]==this&&r[1]==e&&r[2]==t)return this.detachEvent("on"+e,o.splice(n,1)[0][3])},e[s]=t[s]=n[s]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[])
</script>
<![endif]-->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@RoyalAirForce" />
<meta name="twitter:title" property="og:title" content="Displays | Royal Air Force" />
<meta name="twitter:url" property="og:url" content="http://www.raf.mod.uk/display-teams/red-arrows/displays/" />
<meta name="twitter:description" property="og:description" content="Where to see the Red Arrows display in 2021
Locations where the Royal Air Force Aerobatic Team&amp;nbsp;will display&amp;nbsp;in 2021&amp;nbsp;are yet-to-be&amp;nbsp;released.
The RAF Events Team - rather than the Red Arrows - collate " />
<meta name="twitter:image" property="og:image" content="http://www.raf.mod.uk/sites/raf-beta/cache/file/F18FFF1E-D837-4AE0-BA9CB709DDBBCDA0_600x300.jpg" /><meta itemprop="name" content="Displays - Royal Air Force">
<meta itemprop="description" content="Information about the Red Arrows Displays, the sequence, types, events and requesting a flypast.">
<meta property="og:url" content="https://www.raf.mod.uk/" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Royal Air Force" />
<meta property="og:description" content="Information about the Red Arrows Displays, the sequence, types, events and requesting a flypast." />
<meta itemprop="image" content="http://www.raf.mod.uk/sites/raf-beta/cache/file/F18FFF1E-D837-4AE0-BA9CB709DDBBCDA0_600x300.jpg">
<meta property="og:site_name" content="Royal Air Force" />
<meta property="og:type" content="article" />
<script type="application/ld+json">
{
"@context": "http://schema.org",
"@type": "BreadcrumbList",
"itemListElement": [
{
"@type": "ListItem",
"position": 1,
"item": {
"@id": "http://www.raf.mod.uk/display-teams/",
"name": "Display teams"
}
},
{
"@type": "ListItem",
"position": 2,
"item": {
"@id": "http://www.raf.mod.uk/display-teams/red-arrows/",
"name": "Red Arrows"
}
},
{
"@type": "ListItem",
"position": 3,
"item": {
"@id": "http://www.raf.mod.uk/display-teams/red-arrows/displays/",
"name": "Displays"
}
}]
}
</script>
<title>Displays | Red Arrows | Royal Air Force</title>
<link rel="stylesheet" href="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/assets/dist/css/bootstrap-e641da31ed.css">
<link rel="stylesheet" href="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/assets/dist/css/main-226002bad2.css">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<style>
/* In theory an EDGE only query, in practice who know... */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
}
/* IE10 use the prefix for each selector */
html[data-useragent*='MSIE 10.0'] .noWebglSupport {
display: block;
}
html[data-useragent*='MSIE 10.0'] .hasWebglSupport{
display: none;
}
/* IE11 */
@media all and (-ms-high-contrast:none){
*::-ms-backdrop,
[data-aos^=fade][data-aos^=fade],[data-aos^=zoom][data-aos^=zoom]{
opacity: 1;
}
*::-ms-backdrop,.c-content-list{
min-height: 550px;
}
*::-ms-backdrop,.news-item,.news-feature .news-feature__featured{
margin-bottom: 30px;
}
*::-ms-backdrop,.news-feature__featured .news-item__copy-container{
width: 50%;
}
*::-ms-backdrop,
.raf-station-grid .station .station-badge,
.raf-squadron-grid .squadron .squadron-badge
{
border-left: 16px solid white;
border-right: 16px solid white;
}
*::-ms-backdrop,
.c-footer .c-footer-links.c-footer-links-social .c-social-link:active,
.c-footer .c-footer-links.c-footer-links-social .c-social-link:focus,
.c-footer .c-footer-links.c-footer-links-social .c-social-link:hover{
background-color: #fff;
}
*::-ms-backdrop,.c-content-list__item {
display: block;
}
*::-ms-backdrop,select.filters-select::-ms-expand {
display: none;
}
*::-ms-backdrop,.news-item.news-item-row .news-item__background{
min-width: 100%;
}
*::-ms-backdrop,.news-item.news-item-row .news-item__copy-container{
width: 100%;
}
*::-ms-backdrop,.c-globe3d-container .tns-slider{
margin: 0;
}
*::-ms-backdrop,.c-globe3d-container .tns-inner{
align-items: center;
}
@media(min-width: 768px){
*::-ms-backdrop,.news-item.news-item-row .news-item__background{
min-width: 50%;
}
*::-ms-backdrop,.news-item.news-item-row .news-item__copy-container{
width: 50%;
}
}
@media(min-width: 992px){
*::-ms-backdrop,.news-item.news-item-row .news-item__background{
min-width: 33%;
}
*::-ms-backdrop,.news-item.news-item-row .news-item__copy-container{
width: 66%;
}
}
}
@media all and (-ms-high-contrast:none) and (min-width: 992px){
*::-ms-backdrop,
.raf-station-grid .station .station-badge,
.raf-squadron-grid .squadron .squadron-badge
{
border-left: 16px solid white;
border-right: 16px solid white;
}
*::-ms-backdrop,
sidebar .c-page-contents{
max-width: 300px;
}
}
@media all and (-ms-high-contrast:none) and (min-width: 1200px){
*::-ms-backdrop,
.raf-station-grid .station .station-badge,
.raf-squadron-grid .squadron .squadron-badge
{
border-left: 19px solid white;
border-right: 19px solid white;
}
}
@media all and (-ms-high-contrast:none) and (min-width: 1400px){
*::-ms-backdrop,
.raf-station-grid .station .station-badge,
.raf-squadron-grid .squadron .squadron-badge
{
border-left: 32px solid white;
border-right: 32px solid white;
}
}
</style>
<!--[if IE]>
<style>
.noWebglSupport {
display: block;
}
.hasWebglSupport{
display: none;
}
.c-content-list{
min-height: 600px;
}
select{
background: none;
}
</style>
<![endif]-->
<!--[if lte IE 9]>
<style>
body{
font-family: arial, sans-serif;
}
.c-menu--has-kids{
padding-right: 20px !important;
}
.c-menu--has-kids:after{
top: -25px;
right: -15px;
}
.grid-header{
display:none;
}
.c-feedback-banner-full p {
display: inline;
}
.x-site-header{
height: 70px
}
.x-site-logo{
top: 40px
}
.x-site-search__button{
height: 32px;
}
.x-site-search__input{
top: -3px;
}
.x-site-meta__join-cta{
height: 32px;
}
.x-site-meta__actions{
display:inherit;
}
.c-back-to-top {
display: none
}
.noWebglSupport {
display: block;
}
.hasWebglSupport{
display: none;
}
</style>
<![endif]-->
<!--[if lte IE 8]>
<style>
.grid .station img,
.grid .squadron img{
height: 300px;
}
.copy img{
width: 100% !important;
}
.c-row__body.c-row__body--ie8{
display: block;
}
.ie8show{
display: block;
}
.ie8hide{
display: none;
}
</style>
<![endif]-->
<script>
(function(d) {
var config = {
kitId: 'nsb4ump',
scriptTimeout: 3000,
async: true
},
h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
})(document);
</script>
<script>
var contentid='E97FC75E-FF7F-4C97-B787D46D6511BF72';
var showPageContents = 'Yes';
var headingsToIncludeInToC = 'H2';
var showBackToTop = 'No';
</script>
<script type="text/javascript" src="https://www.raf.mod.uk/core/modules/v1/core_assets/js/mura.min.js?v=7.1.457"></script>
<script>
Mura.init({
loginURL:"?display=login",
siteid:"raf-beta",
contentid:"E97FC75E-FF7F-4C97-B787D46D6511BF72",
contenthistid:"313CD36F-E499-446F-9AD6ED270FFF488B",
parentid:"99FD2B2B-648A-4A99-823888747D65BFE8",
context:"",
nocache:0,
assetpath:"/sites/raf-beta",
corepath:"https://cms.raf.mod.uk/core",
fileassetpath:"/sites/raf-beta",
themepath:"/sites/raf-beta/themes/raf-beta",
reCAPTCHALanguage:"en",
preloaderMarkup: "\x3Ci\x20class\x3D\x22mura\x2Dpreloader\x20fa\x20fa\x2Drefresh\x20fa\x2Dspin\x22\x3E\x3C\x2Fi\x3E",
mobileformat: false,
windowdocumentdomain: "",
layoutmanager:true,
type:"Folder",
subtype:"DisplaySequences",
queueObjects: true,
rb:{"formrequiredwrapperclass":"","formradiolabelclass":"radio","formresponsewrapperclass":"","formwrapperclass":"","formbuttoncancellabel":"Cancel","formselectclass":"form-control","formbuttonclass":"btn btn-default","formfileclass":"form-control","formbuttonwrapperclass":"btn-group","formbuttoninnerclass":"input-group-btn","formcheckboxwrapperclass":"","formradiowrapperclass":"","formcheckboxlabelclass":"checkbox","formbuttonnextlclass":"form-nav","forminputclass":"form-control","formradioclass":"","formcheckboxclass":"","formfieldlabelclass":"control-label","formtextareaclass":"form-control","formbuttonbacklabel":"Back","formbuttonsubmitclass":"form-submit btn-primary","formbuttonsubmitlabel":"Submit","formrequiredlabel":"Required","generalwrapperclass":"well","formbuttonnextlabel":"Next","generalwrapperbodyclass":"","formbuttomsubmitclass":"form-submit btn-primary","formbuttonbackclass":"form-nav","formerrorwrapperclass":"","formbuttoncancelclass":"form-cancel btn-primary pull-right","formwrapperbodyclass":"","formbuttonsubmitwaitlabel":"Please Wait...","formgeneralcontrolclass":"form-control","formfieldwrapperclass":"form-group"},
dtExample:"10/11/2024",
dtCh:"/",
dtFormat:[1,0,2],
dtLocale:"en-GB"
});
</script>
<script src="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/content_types/Page_Equipment/3d_aircraft_recognition/RAF-3D-models/babylonjs/babylon.js"></script>
<script src="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/content_types/Page_Equipment/3d_aircraft_recognition/RAF-3D-models/babylonjs/babylonjs.loaders.min.js"></script>
<script src="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/content_types/Page_Equipment/3d_aircraft_recognition/RAF-3D-models/babylonjs/pep.js"></script>
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script></head>
<body id="displayteams" style="background-image: url(https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/assets/dist/images/clouds_background-0ca8cc4e56.jpg);" class="two-col-layout depth-3 displays page-has-sidebar">

<canvas id="renderCanvas" style="width: 100%; height: 100%; touch-action: none; background: grey url('https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/content_types/Page_Equipment/3d_aircraft_recognition/RAF-3D-models/textures/cloud.jpg'); background-size: cover;"></canvas>

<script>
var canvas = document.getElementById("renderCanvas"); // Get the canvas element
var engine = new BABYLON.Engine(canvas, true); // Generate the BABYLON 3D engine
engine.loadingUIBackgroundColor = "#002856";
// #
var manoeuvreModels = ['Reds6Though9Pass.glb', 'VixenBreak.glb', 'Tornado.glb'];
var manoeuvreTitles = ["'Reds 6 Through 9 Pass'", "'Vixen Break'", "'Tornado'"];
var manoeuvreScales = [1, 0.8, 0.7];
var manoeuvreSpeedRatio = [0.65, 0.65, 0.9];
var isPaused = false;
$('.c-3d-overlay__1 .c-cta--pause').on('click', function(){
isPaused = !isPaused
if (isPaused) {
$(this).addClass("paused");
$(this).attr('aria-label', 'Play manouevre').html('Play&nbsp;&nbsp;<i class="material-icons">play_arrow</i>');
} else {
$(this).attr('aria-label', 'Pause manouevre').html('Pause&nbsp;&nbsp;<i class="material-icons">pause</i>');
}
});
$('.c-3d-overlay--mobile-buttons .c-cta--pause').on('click', function(){
isPaused = !isPaused
if (isPaused) {
$(this).addClass("paused");
$(this).attr('aria-label', 'Play manouevre').html('&nbsp;<i class="material-icons">play_arrow</i>');
} else {
$(this).attr('aria-label', 'Pause manouevre').html('&nbsp;<i class="material-icons">pause</i>');
}
});
let smokeCfg = [
[
{ // Reds 6 Through 9 Pass
mesh: "pod",
on: "2.3",
off: "5",
colour: "white"
}, {
mesh: "pod_2",
on: "2.3",
off: "5",
colour: "white"
}, {
mesh: "pod_3",
on: "2.4",
off: "5.5",
colour: "red"
}, {
mesh: "pod_4",
on: "2.4",
off: "5.5",
colour: "blue"
}
],
[
{ // Vixen Break
mesh: "pod",
on: "0.5",
off: "5",
colour: "red"
}, {
mesh: "pod_2",
on: "0.5",
off: "5",
colour: "white"
}, {
mesh: "pod_3",
on: "0.5",
off: "5",
colour: "blue"
}, {
mesh: "pod_4",
on: "0.5",
off: "5",
colour: "white"
}, {
mesh: "pod_5",
on: "0.5",
off: "5",
colour: "red"
}, {
mesh: "pod_6",
on: "0.5",
off: "5",
colour: "white"
}, {
mesh: "pod_7",
on: "0.5",
off: "5",
colour: "blue"
}
],
[
{ //Tornado
mesh: "pod",
on: "0",
off: "11",
colour: "red"
}, {
mesh: "pod_2",
on: "0",
off: "10",
colour: "blue"
}, {
mesh: "pod_3",
on: "0",
off: "10",
colour: "white"
}
]
];
var manoeuvre = 0;
var renderingZone = document.getElementById("renderCanvas");
var isFullScreen = false;
var isAnimsLoaded = false;
document.addEventListener("fullscreenchange", onFullScreenChange, false);
document.addEventListener("mozfullscreenchange", onFullScreenChange, false);
document.addEventListener("webkitfullscreenchange", onFullScreenChange, false);
document.addEventListener("msfullscreenchange", onFullScreenChange, false);
//Add polyfills for IE11
if (!Array.prototype.forEach) {
Array.prototype.forEach = function (callback) {
var T,
k;
if (this == null) {
throw new TypeError('this is null or not defined');
}
var O = Object(this);
var len = O.length >>> 0;
if (typeof callback !== 'function') {
throw new TypeError(callback + ' is not a function');
}
if (arguments.length > 1) {
T = arguments[1];
}
k = 0;
while (k < len) {
var kValue;
if (k in O) {
kValue = O[k];
callback.call(T, kValue, k, O);
}
k++;
}
};
}
if (!String.prototype.includes) {
String.prototype.includes = function () {
'use strict';
return String.prototype.indexOf.apply(this, arguments) !== -1;
};
}
// End of polyfills
/***** Add the create scene function ******/
var createScene = function (anim) {
// Create the scene space
var scene = new BABYLON.Scene(engine);
scene.clearColor = new BABYLON.Color4(0, 0, 0, 0.00000000001);
var skybox = BABYLON.Mesh.CreateBox("skyBox", 13500.0, scene);
var skyboxMaterial = new BABYLON.StandardMaterial("skyBox", scene);
skyboxMaterial.backFaceCulling = false;
skyboxMaterial.disableLighting = true;
skybox.material = skyboxMaterial;
skybox.infiniteDistance = true;
skyboxMaterial.disableLighting = true;
skyboxMaterial.reflectionTexture = new BABYLON.CubeTexture("img/TropicalSunnyDay", scene);
// #
skyboxMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;
// Add a camera to the scene and attach it to the canvas
var camera = new BABYLON.ArcRotateCamera("Camera", -1.54, (Math.PI / 2) - 0.1, 4000, new BABYLON.Vector3(0, 0, 0), scene);
camera.alpha = -1.54;
camera.lowerRadiusLimit = 100;
camera.upperRadiusLimit = 4000;
camera.maxZ = 13500;
camera.attachControl(canvas, false);
camera.wheelPrecision = 1;
camera.pinchPrecision = 1
// Add lights to the scene
var ambient = new BABYLON.HemisphericLight("AmbientLight", new BABYLON.Vector3(1, 1, 0), scene);
ambient.diffuse = new BABYLON.Color3(1, 1, 1);
ambient.specular = new BABYLON.Color3(1, 1, 1);
ambient.groundColor = new BABYLON.Color3(1, 1, 1);
ambient.intensity = 1;
var point = new BABYLON.DirectionalLight("DirectionalLight", new BABYLON.Vector3(-1, -1, 0), scene);
point.diffuse = new BABYLON.Color3(1, 1, 1);
point.specular = new BABYLON.Color3(1, 1, 1);
point.intensity = 2;
// Instrumentation var instrumentation = new BABYLON.EngineInstrumentation(engine); instrumentation.captureGPUFrameTime = true; instrumentation.captureShaderCompilationTime = true;
return scene;
};
/******* End of the create scene function ******/
//Call the createScene function
var scene = createScene();
var loader = BABYLON.SceneLoader.Append("img/", manoeuvreModels[0], scene, function (scene) {
// #
loader.compileMaterials = true;
});
loader.onComplete = function () {
var urls = getAllUrlParams();
var isPaused = false;
if (typeof urls.scenedebug != undefined) {
if (urls.scenedebug == 'true') {
scene.debugLayer.show()
}
}
var thisScale = manoeuvreScales[manoeuvre];
var root = scene.getMeshByName('__root__')
root.scaling.x = thisScale;
root.scaling.y = thisScale;
root.scaling.z = thisScale;
if ($(window).width() > 991 && $(window).height() > 600) {
// Only drop the root node on larger screens, otherwise it gets hidden behind the UI/page title
root.setAbsolutePosition(new BABYLON.Vector3(0, -400, 0));
}
scene.animationGroups[0].speedRatio = manoeuvreSpeedRatio[manoeuvre];
modelFixes();
doSPSSmoke();
$('.c-cta--fullscreen').on('click', function(){
switchFullScreen();
})
};
var modelFixes = function (loader) {
// Set the smoke pod albedo colour, as base colour too bright on the pods for some reason, this matches the Hawk texture settings seen in the babylonjs inspector.
for (var mesh = 0; mesh < scene.meshes.length; mesh++) {
// Fix smoke pod colour
if (scene.meshes[mesh].name.includes('pod_')) {
scene.meshes[mesh].material.albedoColor = new BABYLON.Color3(0.44, 0.44, 0.44);
}
// Add clearcoat for reflections
if (scene.meshes[mesh].name.includes('pod_') || scene.meshes[mesh].name.includes('Hawk_')) {
scene.meshes[mesh].material.clearCoat.isEnabled = true;
}
}
}
// Register a render loop to repeatedly render the scene
engine.runRenderLoop(function () {
if (isPaused){
if (typeof scene.animationGroups[0] !== 'undefined'){
scene.animationGroups[0].speedRatio = 0;
}
} else {
if (typeof scene.animationGroups[0] !== 'undefined'){
scene.animationGroups[0].speedRatio = manoeuvreSpeedRatio[manoeuvre];
}
}
scene.render();
});
var doSPSSmoke = function () {
var manouevreSmokeCfg = smokeCfg[manoeuvre];
var texture = new BABYLON.Texture("img/smoke.png", scene);
//#
var mat = new BABYLON.StandardMaterial("mat", scene);
mat.diffuseTexture = texture;
mat.emissiveTexture = texture;
mat.specularColor = new BABYLON.Color3(0, 0, 0);
texture.hasAlpha = true;
mat.useAlphaFromDiffuseTexture = true;
var size = 13500; // world size
var particleNb = manouevreSmokeCfg.length; // particle number
var trailNb = 250; // number in the trail
var model = BABYLON.MeshBuilder.CreatePlane("model", {
width: size * 2.75,
height: size * 2,
updatable: true
}, scene);
var sps = new BABYLON.SolidParticleSystem("smoke_sps", scene, {enableDepthSort: true});
sps.addShape(model, particleNb * trailNb);
model.dispose();
sps.buildMesh();
sps.mesh.hasVertexAlpha = true;
sps.mesh.material = mat;
var scl = 0.009;
sps.initParticles = function () {
for (var p = 0; p < particleNb; p++) {
// Here we need to split it into more than one trail, by assigning position to current pod position, the rest then follow suit in updateParticles
var smoke_pod = scene.getMeshByName(manouevreSmokeCfg[p].mesh);
var colour = manouevreSmokeCfg[p].colour;
var smokeColor4 = new BABYLON.Color4(1, 1, 1, 1.0);
if (colour == 'red') {
smokeColor4 = new BABYLON.Color4(1, 0.08, 0.58, 1);
} else if (colour == "blue") {
smokeColor4 = new BABYLON.Color4(0, 0.75, 1, 1);
}
for (var t = 0; t < trailNb; t++) {
var cur = sps.particles[p * trailNb + t]; // current particle
cur.color.copyFrom(smokeColor4);
cur.color.a = (1 + (0.8 * t)) / trailNb;
cur.position.copyFrom(smoke_pod.absolutePosition);
cur.isVisible = false;
var scal = 0
var rateOfTaper = 60;
var maxDiamFactor = 2.5;
if (t > (trailNb - 37)) {
scal = scl * ((trailNb - t) / rateOfTaper);
if (scal > scl * (1 + t) / (trailNb * maxDiamFactor)) {
scal = scl * (1 + t) / (trailNb * maxDiamFactor);
}
} else {
scal = scl * (1 + t) / (trailNb * maxDiamFactor);
}
cur.scale.copyFromFloats(scal, scal, scal);
rotateby = Math.random() * Math.PI * 2;
cur.rotation.z = rotateby;
}
}
};
sps.initParticles();
sps.computeParticleTexture = false;
sps.computeParticleRotation = true;
sps.billboard = true;
sps.isAlwaysVisible = true;
sps.mesh.freezeNormals();
sps.setParticles();
var remainder = trailNb - 1;
sps.updateParticle = function (p) {
if (!isPaused){
var manouevreSmokeCfg = smokeCfg[manoeuvre];
var podNum = Math.floor(p.idx / trailNb);
if (p.idx % trailNb != remainder) {
prevParticle = sps.particles[p.idx + 1];
p.position.copyFrom(prevParticle.position);
p.rotation.z = prevParticle.rotation.z;
p.isVisible = prevParticle.isVisible;
} else {
if (areAnimsLoaded()) {
if (manouevreSmokeCfg[podNum] !== undefined) {
var smoke_pod = scene.getMeshByName(manouevreSmokeCfg[podNum].mesh);
p.position = smoke_pod.absolutePosition;
rotateby = Math.random() * Math.PI * 2;
p.rotation.z = rotateby;
if (scene.animationGroups[0]._targetedAnimations[0].animation.runtimeAnimations[0].currentFrame > manouevreSmokeCfg[podNum].on) {
p.isVisible = true;
}
if (scene.animationGroups[0]._targetedAnimations[0].animation.runtimeAnimations[0].currentFrame > manouevreSmokeCfg[podNum].off) {
p.isVisible = false;
}
}
}
}
}
};
scene.registerBeforeRender(function () {
sps.setParticles();
});
}
// Watch for browser/canvas resize events
window.addEventListener("resize", function () {
engine.resize();
});
function onFullScreenChange() {
if (document.fullscreen !== undefined) {
isFullScreen = document.fullscreen;
} else if (document.mozFullScreen !== undefined) {
isFullScreen = document.mozFullScreen;
} else if (document.webkitIsFullScreen !== undefined) {
isFullScreen = document.webkitIsFullScreen;
} else if (document.msIsFullScreen !== undefined) {
isFullScreen = document.msIsFullScreen;
}
}
switchFullScreen = function () {
if (!isFullScreen) {
engine.switchFullscreen(false);
} else {
BABYLON.Tools.ExitFullscreen();
}
};
switchAnimation = function () {
if (!isFullScreen) {
engine.switchFullscreen(false);
} else {
BABYLON.Tools.ExitFullscreen();
}
};
swapScene = function (direction) {
if (direction < 0) {
manoeuvre--;
if (manoeuvre < 0) {
manoeuvre = manoeuvreModels.length - 1;
}
} else {
manoeuvre++;
if (manoeuvre >= manoeuvreModels.length) {
manoeuvre = 0;
}
}
scene.meshes.slice().reverse().forEach(function (mesh) {
if (mesh.name.includes('__root__') || mesh.name.includes('Hawk') || mesh.name.includes('sps')) {
mesh.dispose();
}
});
scene.materials.slice().reverse().forEach(function (material) {
if (material.name.includes('body') || material.name.includes('pod')) {
material.dispose();
}
});
scene.textures.slice().reverse().forEach(function (texture) {
if (texture.name.includes('body') || texture.name.includes('pod')) {
texture.dispose();
}
});
scene.animationGroups.slice().reverse().forEach(function (animationGroup) {
animationGroup.dispose();
});
var loader = BABYLON.SceneLoader.Append("img/", manoeuvreModels[manoeuvre], scene, function (scene) {
// #
loader.compileMaterials = true;
camera = scene.cameras[0];
camera.alpha = -1.54;
camera.radius = 4000;
$('.c-3d-overlay__title').text(manoeuvreTitles[manoeuvre]);
});
loader.onComplete = function () {
var thisScale = manoeuvreScales[manoeuvre];
var root = scene.getMeshByName('__root__');
if ($(window).width() > 991 && $(window).height() > 600) {
// Only drop the root node on larger screens, otherwise it gets hidden behind the UI/page title
root.setAbsolutePosition(new BABYLON.Vector3(0, -400, 0));
}
root.scaling.x = thisScale;
root.scaling.y = thisScale;
root.scaling.z = thisScale;
scene.animationGroups[0].speedRatio = manoeuvreSpeedRatio[manoeuvre];
modelFixes();
doSPSSmoke();
};
}
function areAnimsLoaded() {
var animsLoaded = false
if (typeof scene.animationGroups[0] != 'undefined') {
if (typeof scene.animationGroups[0]._targetedAnimations[0] != 'undefined') {
if (typeof scene.animationGroups[0]._targetedAnimations[0].animation.runtimeAnimations[0] != 'undefined') {
animsLoaded = true;
}
}
}
return animsLoaded;
}
function getAllUrlParams(url) {
var queryString = url
? url.split('?')[1]
: window.location.search.slice(1);
var obj = {};
if (queryString) {
queryString = queryString.split('#')[0];
//#
var arr = queryString.split('&');
for (var i = 0; i < arr.length; i++) {
var a = arr[i].split('=');
var paramName = a[0];
var paramValue = typeof(a[1]) === 'undefined'
? true
: a[1];
paramName = paramName.toLowerCase();
if (typeof paramValue === 'string')
paramValue = paramValue.toLowerCase();
if (paramName.match(/\[(\d+)?\]$/)) {
var key = paramName.replace(/\[(\d+)?\]/, '');
if (!obj[key])
obj[key] = [];
if (paramName.match(/\[\d+\]$/)) {
var index = /\[(\d+)\]/.exec(paramName)[1];
obj[key][index] = paramValue;
} else {
obj[key].push(paramValue);
}
} else {
if (!obj[paramName]) {
obj[paramName] = paramValue;
} else if (obj[paramName] && typeof obj[paramName] === 'string') {
obj[paramName] = [obj[paramName]];
obj[paramName].push(paramValue);
} else {
obj[paramName].push(paramValue);
}
}
}
}
return obj;
}
</script>


<script async src="https://www.raf.mod.uk/sites/raf-beta/themes/raf-beta/assets/dist/js/body-02cd920c0d.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-15489333-3', 'auto');
ga('set', 'anonymizeIp', true);
ga('send', 'pageview');
</script>
<script src="https://cms.raf.mod.uk/core/modules/v1/cta/js/mura.displayobject.cta.min.js" ></script></body>
</html>
